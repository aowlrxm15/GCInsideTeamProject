<?xml version="1.0" encoding="UTF-8"?>
<!-- 2023/03/08 // 심규영 // 메인 인덱스 xml 생성 -->
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.gcInside.dao.MainDAO">
    <!-- create -->
    <!-- read -->

    <!-- 2023/03/22 // 라성준 // 메인 인덱스 갤러리 불러오기 -->
    <select id="MainIndexNewCommunity" resultType="kr.co.gcInside.vo.galleryVO">
        SELECT
        gell_num, gell_cate, gell_name, gell_address, gell_main_img, gell_info, gell_manager,
        gell_grade, gell_status, gell_hit, gell_article_count, gell_rdate, gell_wdate,
        gell_sanctions_rdate, gell_sanctions_wdate, gell_sanctions_grade
        FROM gc_gell
        WHERE gell_rdate >= DATE_SUB(NOW(), INTERVAL 1 MONTH) AND `gell_grade` = '0'
        ORDER BY gell_rdate DESC
        LIMIT #{start}, 10;
    </select>

    <!-- 2023/03/22 // 라성준 // 메인 인덱스 마이너 갤러리 불러오기 -->
    <select id="MainIndexNewMgellCommunity" resultType="kr.co.gcInside.vo.galleryVO">
        SELECT
        gell_num, gell_cate, gell_name, gell_address, gell_main_img, gell_info, gell_manager,
        gell_grade, gell_status, gell_hit, gell_article_count, gell_rdate, gell_wdate,
        gell_sanctions_rdate, gell_sanctions_wdate, gell_sanctions_grade
        FROM gc_gell
        WHERE gell_rdate >= DATE_SUB(NOW(), INTERVAL 1 MONTH) AND `gell_grade` = '1'
        ORDER BY gell_rdate DESC
        LIMIT #{start}, 10;
    </select>

    <!-- 2023/03/22 // 라성준 // 메인 인덱스 미니 갤러리 불러오기 -->
    <select id="MainIndexNewMiniCommunity" resultType="kr.co.gcInside.vo.galleryVO">
        SELECT
        gell_num, gell_cate, gell_name, gell_address, gell_main_img, gell_info, gell_manager,
        gell_grade, gell_status, gell_hit, gell_article_count, gell_rdate, gell_wdate,
        gell_sanctions_rdate, gell_sanctions_wdate, gell_sanctions_grade
        FROM gc_gell
        WHERE gell_rdate >= DATE_SUB(NOW(), INTERVAL 1 MONTH) AND `gell_grade` = '2'
        ORDER BY gell_rdate DESC
        LIMIT #{start}, 10;
    </select>

    <!-- 마이너 갤러리 개수 -->
    <select id="MainIndexNewCommunityCount" parameterType="map" resultType="int">
        SELECT COUNT(`gell_num`) FROM `gc_gell`
        WHERE gell_rdate >= DATE_SUB(NOW(), INTERVAL 1 MONTH) AND `gell_grade` =
        <choose>
            <when test="grade.equals('m')">0</when>
            <when test="grade.equals('mgall')">1</when>
            <when test="grade.equals('mini')">2</when>
            <otherwise>0</otherwise>
        </choose>
        ;
    </select>
    <!-- upload -->
    <!-- delete -->
</mapper>